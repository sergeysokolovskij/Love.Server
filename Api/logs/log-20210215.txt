2021-02-15T22:17:35.0040476+02:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-02-15T22:17:35.0140915+02:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-02-15T22:17:35.0183297+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-02-15T22:17:35.0224968+02:00  [INF] Hosting environment: "Development" (c3307c92)
2021-02-15T22:17:35.0263680+02:00  [INF] Content root path: "D:\Рабочий стол\love\Love.Server\Api" (b5d60022)
2021-02-15T22:17:48.4442502+02:00  [INF] Application is shutting down... (90f52c38)
2021-02-15T22:18:40.4670775+02:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-02-15T22:18:40.4758939+02:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-02-15T22:18:40.4785273+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-02-15T22:18:40.4809259+02:00  [INF] Hosting environment: "Development" (c3307c92)
2021-02-15T22:18:40.4833245+02:00  [INF] Content root path: "D:\Рабочий стол\love\Love.Server\Api" (b5d60022)
2021-02-15T22:18:45.0943139+02:00  [INF] Application is shutting down... (90f52c38)
2021-02-15T22:19:14.5476865+02:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-02-15T22:19:14.5570950+02:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-02-15T22:19:14.5643030+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-02-15T22:19:14.5676001+02:00  [INF] Hosting environment: "Development" (c3307c92)
2021-02-15T22:19:14.5707926+02:00  [INF] Content root path: "D:\Рабочий стол\love\Love.Server\Api" (b5d60022)
2021-02-15T22:19:32.7287420+02:00  [INF] Application is shutting down... (90f52c38)
2021-02-15T22:20:24.1512189+02:00  [INF] Try to run app... (c09a3810)
2021-02-15T22:20:25.2718070+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:20:25.8091168+02:00  [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='lovedb' AND TABLE_NAME='__EFMigrationsHistory';" (0723d8ff)
2021-02-15T22:20:25.8284820+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;" (0723d8ff)
2021-02-15T22:20:25.8332809+02:00  [INF] Миграции не были применены (aa7e97b5)
2021-02-15T22:20:25.9566614+02:00  [INF] Exchanges created and ready to work (5cf186cf)
2021-02-15T22:20:26.2821858+02:00  [INF] App runing sucess! (4879dd0c)
2021-02-15T22:20:26.3142894+02:00  [INF] User profile is available. Using '"C:\Users\Ivan\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-02-15T22:20:26.3618399+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:20:26.5628189+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Created`, `u`.`Login`, `u`.`Password`, `u`.`Updated`
FROM `UserAccounts` AS `u`" (0723d8ff)
2021-02-15T22:20:26.7282066+02:00  [INF] Executed DbCommand ("18"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T22:20:26.7564778+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T22:20:27.0845944+02:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-02-15T22:20:27.0871721+02:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-02-15T22:20:27.0903473+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-02-15T22:20:27.0931378+02:00  [INF] Hosting environment: "Development" (c3307c92)
2021-02-15T22:20:27.0958190+02:00  [INF] Content root path: "D:\Рабочий стол\love\Love.Server\Api" (b5d60022)
2021-02-15T22:20:28.8499634+02:00  [INF] Application is shutting down... (90f52c38)
2021-02-15T22:40:08.1618764+02:00  [INF] Try to run app... (c09a3810)
2021-02-15T22:40:09.3646260+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:09.9030156+02:00  [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='lovedb' AND TABLE_NAME='__EFMigrationsHistory';" (0723d8ff)
2021-02-15T22:40:09.9211818+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;" (0723d8ff)
2021-02-15T22:40:09.9270046+02:00  [INF] Миграции не были применены (aa7e97b5)
2021-02-15T22:40:10.0767314+02:00  [INF] Exchanges created and ready to work (5cf186cf)
2021-02-15T22:40:10.3651489+02:00  [INF] App runing sucess! (4879dd0c)
2021-02-15T22:40:10.3979800+02:00  [INF] User profile is available. Using '"C:\Users\Ivan\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-02-15T22:40:10.4371401+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:10.6500801+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Created`, `u`.`Login`, `u`.`Password`, `u`.`Updated`
FROM `UserAccounts` AS `u`" (0723d8ff)
2021-02-15T22:40:10.7986167+02:00  [INF] Executed DbCommand ("18"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T22:40:10.8268920+02:00  [INF] Executed DbCommand ("8"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T22:40:11.1811783+02:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-02-15T22:40:11.1837680+02:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-02-15T22:40:11.1902721+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-02-15T22:40:11.1929198+02:00  [INF] Hosting environment: "Development" (c3307c92)
2021-02-15T22:40:11.1960049+02:00  [INF] Content root path: "D:\Рабочий стол\love\Love.Server\Api" (b5d60022)
2021-02-15T22:40:31.9962441+02:00 0HM6HU7O24IUU:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T22:40:33.2582311+02:00 0HM6HU7O24IUU:00000001 [INF] Failed to validate the token. (616bef97)
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-02-15T22:40:33.2600008+02:00 0HM6HU7O24IUU:00000001 [INF] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'." (48071232)
2021-02-15T22:40:33.2885678+02:00 0HM6HU7O24IUU:00000001 [INF] Authorization failed. (b15dd539)
2021-02-15T22:40:33.2973896+02:00 0HM6HU7O24IUU:00000001 [INF] AuthenticationScheme: "Bearer" was challenged. (d45f1f38)
2021-02-15T22:40:33.3084341+02:00 0HM6HU7O24IUU:00000001 [INF] Request finished in 1316.21ms 401  (791a596a)
2021-02-15T22:40:33.4115122+02:00 0HM6HU7O24IUU:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/Account/longsessionupdate application/json; charset=utf-8 51 (ca22a1cb)
2021-02-15T22:40:33.4171043+02:00 0HM6HU7O24IUU:00000002 [INF] Failed to validate the token. (616bef97)
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-02-15T22:40:33.4172234+02:00 0HM6HU7O24IUU:00000002 [INF] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'." (48071232)
2021-02-15T22:40:33.4183440+02:00 0HM6HU7O24IUU:00000002 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)"' (500cc934)
2021-02-15T22:40:33.4601795+02:00 0HM6HU7O24IUU:00000002 [INF] Route matched with "{action = \"LongSessionUpdate\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LongSessionUpdateAsync(Api.Models.RequestModels.AccountController.RefreshTokenUpdateModel)" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T22:40:33.5487003+02:00 0HM6HU7O24IUU:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:34.3511030+02:00 0HM6HU7O24IUU:00000002 [INF] Executed DbCommand ("27"ms) [Parameters=["@__value_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `l`.`Id`, `l`.`Created`, `l`.`ExpiresIn`, `l`.`FingerPrint`, `l`.`Updated`, `l`.`UserId`, `l`.`Value`
FROM `LongSessions` AS `l`
WHERE `l`.`Value` = @__value_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:34.3814096+02:00 0HM6HU7O24IUU:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@__session_UserId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__session_UserId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:34.5031790+02:00 0HM6HU7O24IUU:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 255), @__longSession_1='?' (Size = 4000), @__fingerPrint_2='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `l`.`Id`, `l`.`Created`, `l`.`ExpiresIn`, `l`.`FingerPrint`, `l`.`Updated`, `l`.`UserId`, `l`.`Value`
FROM `LongSessions` AS `l`
WHERE ((`l`.`UserId` = @__userId_0) AND (`l`.`Value` = @__longSession_1)) AND (`l`.`FingerPrint` = @__fingerPrint_2)
LIMIT 1" (0723d8ff)
2021-02-15T22:40:34.7724828+02:00 0HM6HU7O24IUU:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=["@p6='?' (DbType = Int64), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255), @p5='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""UPDATE `LongSessions` SET `Created` = @p0, `ExpiresIn` = @p1, `FingerPrint` = @p2, `Updated` = @p3, `UserId` = @p4, `Value` = @p5
WHERE `Id` = @p6;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T22:40:34.9614995+02:00 0HM6HU7O24IUU:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:40:35.0007938+02:00 0HM6HU7O24IUU:00000002 [INF] Executing JsonResult, writing value of type '"Shared.AuthResult"'. (2f513669)
2021-02-15T22:40:35.0290122+02:00 0HM6HU7O24IUU:00000002 [INF] Executed action "Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)" in 1560.2928ms (afa2e885)
2021-02-15T22:40:35.0298778+02:00 0HM6HU7O24IUU:00000002 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)"' (99874f2b)
2021-02-15T22:40:35.0338327+02:00 0HM6HU7O24IUU:00000002 [INF] Request finished in 1622.3933ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T22:40:35.5814763+02:00 0HM6HU7O24IUU:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/WwcvMiJQZzHUDkK-9S60I4nyy5IZjHZEvx_3nS7bMff9eJSFXUnf80i4kz8cHTgo   (ca22a1cb)
2021-02-15T22:40:35.5995595+02:00 0HM6HU7O24IUU:00000003 [INF] Successfully validated the token. (60169667)
2021-02-15T22:40:35.6020323+02:00 0HM6HU7O24IUU:00000003 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:40:35.6022500+02:00 0HM6HU7O24IUU:00000003 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T22:40:35.6075828+02:00 0HM6HU7O24IUU:00000003 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T22:40:35.6085753+02:00 0HM6HU7O24IUU:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:35.6265740+02:00 0HM6HU7O24IUU:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:35.6594897+02:00 0HM6HU7O24IUU:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:35.7029387+02:00 0HM6HU7O24IUU:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:35.7169733+02:00 0HM6HU7O24IUU:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:35.7412002+02:00 0HM6HU7O24IUU:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T22:40:35.7728257+02:00 0HM6HU7O24IUU:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:35.8687447+02:00 0HM6HU7O24IUU:00000003 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200 (e28ccfae)
2021-02-15T22:40:35.8689808+02:00 0HM6HU7O24IUU:00000003 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 261.2609ms (afa2e885)
2021-02-15T22:40:35.8690551+02:00 0HM6HU7O24IUU:00000003 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T22:40:35.8694697+02:00 0HM6HU7O24IUU:00000003 [INF] Request finished in 288.1918ms 200  (791a596a)
2021-02-15T22:40:36.3274560+02:00 0HM6HU7O24IUU:00000004 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T22:40:36.3280743+02:00 0HM6HU7O24IUU:00000004 [INF] Successfully validated the token. (60169667)
2021-02-15T22:40:36.3289880+02:00 0HM6HU7O24IUU:00000004 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:40:36.3293525+02:00 0HM6HU7O24IUU:00000004 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T22:40:36.3344446+02:00 0HM6HU7O24IUU:00000004 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T22:40:36.3487646+02:00 0HM6HU7O24IUU:00000004 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:36.3713665+02:00 0HM6HU7O24IUU:00000004 [INF] Executed DbCommand ("8"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:36.3734131+02:00 0HM6HU7O24IUU:00000004 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T22:40:36.3799650+02:00 0HM6HU7O24IUU:00000004 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 45.3373ms (afa2e885)
2021-02-15T22:40:36.3800921+02:00 0HM6HU7O24IUU:00000004 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T22:40:36.3803121+02:00 0HM6HU7O24IUU:00000004 [INF] Request finished in 52.9269ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T22:40:36.8208199+02:00 0HM6HU7O24IUV:00000001 [INF] Request starting HTTP/1.1 POST https://localhost:5001/messanger/negotiate?negotiateVersion=1  0 (ca22a1cb)
2021-02-15T22:40:36.8236283+02:00 0HM6HU7O24IUV:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T22:40:36.8238727+02:00 0HM6HU7O24IUV:00000001 [INF] Executing endpoint '"/messanger/negotiate"' (500cc934)
2021-02-15T22:40:36.8611343+02:00 0HM6HU7O24IUV:00000001 [INF] Executed endpoint '"/messanger/negotiate"' (99874f2b)
2021-02-15T22:40:36.8612934+02:00 0HM6HU7O24IUV:00000001 [INF] Request finished in 40.6538ms 200 application/json (791a596a)
2021-02-15T22:40:36.9247849+02:00 0HM6HU7O24IV0:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/messanger?id=EK3narHZGrSrxKL1g-zHBA   (ca22a1cb)
2021-02-15T22:40:36.9252591+02:00 0HM6HU7O24IV0:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T22:40:36.9253494+02:00 0HM6HU7O24IV0:00000001 [INF] Executing endpoint '"/messanger"' (500cc934)
2021-02-15T22:40:37.0814827+02:00 0HM6HU7O24IV0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:37.0980295+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.1385579+02:00 0HM6HU7O24IV1:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T22:40:37.1382197+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255), @__sessionCacheKey_SessionId_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`UserId` = @__userId_0) AND (`s`.`SessionId` = @__sessionCacheKey_SessionId_1)
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.1395106+02:00 0HM6HU7O24IV1:00000001 [INF] Failed to validate the token. (616bef97)
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-02-15T22:40:37.1396228+02:00 0HM6HU7O24IV1:00000001 [INF] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'." (48071232)
2021-02-15T22:40:37.1398355+02:00 0HM6HU7O24IV1:00000001 [INF] Authorization failed. (b15dd539)
2021-02-15T22:40:37.1401711+02:00 0HM6HU7O24IV1:00000001 [INF] AuthenticationScheme: "Bearer" was challenged. (d45f1f38)
2021-02-15T22:40:37.1403195+02:00 0HM6HU7O24IV1:00000001 [INF] Request finished in 1.7692ms 401  (791a596a)
2021-02-15T22:40:37.1769755+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:40:37.2576282+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Connections` (`ConnectionId`, `Created`, `SessionId`, `Updated`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Connections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T22:40:37.2749018+02:00 0HM6HU7O24IV1:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/Account/longsessionupdate application/json; charset=utf-8 51 (ca22a1cb)
2021-02-15T22:40:37.2756541+02:00 0HM6HU7O24IV1:00000002 [INF] Failed to validate the token. (616bef97)
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-02-15T22:40:37.2757307+02:00 0HM6HU7O24IV1:00000002 [INF] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'." (48071232)
2021-02-15T22:40:37.2758179+02:00 0HM6HU7O24IV1:00000002 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)"' (500cc934)
2021-02-15T22:40:37.2761481+02:00 0HM6HU7O24IV1:00000002 [INF] Route matched with "{action = \"LongSessionUpdate\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LongSessionUpdateAsync(Api.Models.RequestModels.AccountController.RefreshTokenUpdateModel)" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T22:40:37.2767096+02:00 0HM6HU7O24IV1:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:37.2941278+02:00 0HM6HU7O24IV0:00000001 [INF] 9Ed-sHULlMsoxmU4sCPUtw was connected (77e74944)
2021-02-15T22:40:37.2966137+02:00 0HM6HU7O24IV0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:37.3051120+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.3304528+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T22:40:37.3412997+02:00 0HM6HU7O24IV1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__value_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `l`.`Id`, `l`.`Created`, `l`.`ExpiresIn`, `l`.`FingerPrint`, `l`.`Updated`, `l`.`UserId`, `l`.`Value`
FROM `LongSessions` AS `l`
WHERE `l`.`Value` = @__value_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.3520801+02:00 0HM6HU7O24IV1:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__session_UserId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__session_UserId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.3598011+02:00 0HM6HU7O24IV1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255), @__longSession_1='?' (Size = 4000), @__fingerPrint_2='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `l`.`Id`, `l`.`Created`, `l`.`ExpiresIn`, `l`.`FingerPrint`, `l`.`Updated`, `l`.`UserId`, `l`.`Value`
FROM `LongSessions` AS `l`
WHERE ((`l`.`UserId` = @__userId_0) AND (`l`.`Value` = @__longSession_1)) AND (`l`.`FingerPrint` = @__fingerPrint_2)
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.3769884+02:00 0HM6HU7O24IV1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@p6='?' (DbType = Int64), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255), @p5='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""UPDATE `LongSessions` SET `Created` = @p0, `ExpiresIn` = @p1, `FingerPrint` = @p2, `Updated` = @p3, `UserId` = @p4, `Value` = @p5
WHERE `Id` = @p6;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T22:40:37.3864049+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:40:37.4016602+02:00 0HM6HU7O24IV1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:40:37.4028695+02:00 0HM6HU7O24IV1:00000002 [INF] Executing JsonResult, writing value of type '"Shared.AuthResult"'. (2f513669)
2021-02-15T22:40:37.4032658+02:00 0HM6HU7O24IV1:00000002 [INF] Executed action "Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)" in 127.0337ms (afa2e885)
2021-02-15T22:40:37.4033336+02:00 0HM6HU7O24IV1:00000002 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)"' (99874f2b)
2021-02-15T22:40:37.4036871+02:00 0HM6HU7O24IV1:00000002 [INF] Request finished in 128.7742ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T22:40:37.9169164+02:00 0HM6HU7O24IV1:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/QjWIr43ip5QtGWOnTF60nwFAqtp1BduTb39RLEfjhDkDX7nLrJjb2eq2Bsfa-uuy   (ca22a1cb)
2021-02-15T22:40:37.9211321+02:00 0HM6HU7O24IV1:00000003 [INF] Successfully validated the token. (60169667)
2021-02-15T22:40:37.9220133+02:00 0HM6HU7O24IV1:00000003 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:40:37.9223328+02:00 0HM6HU7O24IV1:00000003 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T22:40:37.9228309+02:00 0HM6HU7O24IV1:00000003 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T22:40:37.9252389+02:00 0HM6HU7O24IV1:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:37.9380362+02:00 0HM6HU7O24IV1:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.9441952+02:00 0HM6HU7O24IV1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.9490155+02:00 0HM6HU7O24IV1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.9528784+02:00 0HM6HU7O24IV1:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.9579587+02:00 0HM6HU7O24IV1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T22:40:37.9603929+02:00 0HM6HU7O24IV1:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:38.7084703+02:00 0HM6HU7O24IV1:00000003 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200 (e28ccfae)
2021-02-15T22:40:38.7086525+02:00 0HM6HU7O24IV1:00000003 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 785.6448ms (afa2e885)
2021-02-15T22:40:38.7087507+02:00 0HM6HU7O24IV1:00000003 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T22:40:38.7093292+02:00 0HM6HU7O24IV1:00000003 [INF] Request finished in 792.6754ms 200  (791a596a)
2021-02-15T22:40:39.0115396+02:00 0HM6HU7O24IV1:00000004 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T22:40:39.0129030+02:00 0HM6HU7O24IV1:00000004 [INF] Successfully validated the token. (60169667)
2021-02-15T22:40:39.0131405+02:00 0HM6HU7O24IV1:00000004 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:40:39.0132442+02:00 0HM6HU7O24IV1:00000004 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T22:40:39.0134210+02:00 0HM6HU7O24IV1:00000004 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T22:40:39.0139228+02:00 0HM6HU7O24IV1:00000004 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:39.0213168+02:00 0HM6HU7O24IV1:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:39.0220770+02:00 0HM6HU7O24IV1:00000004 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T22:40:39.0225026+02:00 0HM6HU7O24IV1:00000004 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 9.0231ms (afa2e885)
2021-02-15T22:40:39.0225604+02:00 0HM6HU7O24IV1:00000004 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T22:40:39.0227293+02:00 0HM6HU7O24IV1:00000004 [INF] Request finished in 11.3788ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T22:40:39.3912740+02:00 0HM6HU7O24IV2:00000001 [INF] Request starting HTTP/1.1 POST https://localhost:5001/messanger/negotiate?negotiateVersion=1  0 (ca22a1cb)
2021-02-15T22:40:39.3934823+02:00 0HM6HU7O24IV2:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T22:40:39.3937160+02:00 0HM6HU7O24IV2:00000001 [INF] Executing endpoint '"/messanger/negotiate"' (500cc934)
2021-02-15T22:40:39.4029473+02:00 0HM6HU7O24IV2:00000001 [INF] Executed endpoint '"/messanger/negotiate"' (99874f2b)
2021-02-15T22:40:39.4031671+02:00 0HM6HU7O24IV2:00000001 [INF] Request finished in 12.0298ms 200 application/json (791a596a)
2021-02-15T22:40:39.4740810+02:00 0HM6HU7O24IV3:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/messanger?id=YB3v6zJzJPpA1pw5Iqq_UQ   (ca22a1cb)
2021-02-15T22:40:39.4747559+02:00 0HM6HU7O24IV3:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T22:40:39.4748682+02:00 0HM6HU7O24IV3:00000001 [INF] Executing endpoint '"/messanger"' (500cc934)
2021-02-15T22:40:39.5526832+02:00 0HM6HU7O24IV3:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:39.5598670+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:39.5746622+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255), @__sessionCacheKey_SessionId_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`UserId` = @__userId_0) AND (`s`.`SessionId` = @__sessionCacheKey_SessionId_1)
LIMIT 1" (0723d8ff)
2021-02-15T22:40:39.5810052+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:40:39.5941545+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Connections` (`ConnectionId`, `Created`, `SessionId`, `Updated`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Connections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T22:40:39.6096938+02:00 0HM6HU7O24IV3:00000001 [INF] 2BsvJGOJlxOzN5C6r2nA4A was connected (38005e20)
2021-02-15T22:40:39.6104469+02:00 0HM6HU7O24IV3:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:39.6169370+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:39.6237899+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T22:40:39.6287287+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:40:49.8036581+02:00 0HM6HU7O24IV0:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:40:49.8081637+02:00 0HM6HU7O24IV0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:40:49.8394885+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:49.8421609+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("0"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:49.8524987+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:49.8643453+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:40:49.9099957+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T22:40:49.9189486+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:49.9387356+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T22:40:50.1161233+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T22:40:50.1307577+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:50.1368288+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:50.1468588+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:40:50.1567269+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T22:40:50.1764581+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:41:20.1400382+02:00 0HM6HU7O24IV0:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:41:20.1414648+02:00 0HM6HU7O24IV0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:41:20.1515384+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:20.1596948+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:20.1648273+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:20.1701428+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:41:20.1764520+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T22:41:20.1815060+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:20.1918043+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T22:41:20.3152815+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T22:41:20.3376776+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:20.3560423+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("8"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:20.3627359+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:20.3709823+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T22:41:20.3830100+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:41:50.4886743+02:00 0HM6HU7O24IV0:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:41:50.4899471+02:00 0HM6HU7O24IV0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:41:50.4986329+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:50.5058113+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:50.5109756+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:50.5162902+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:41:50.5227610+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T22:41:50.5280178+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:50.5384437+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T22:41:50.6035548+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T22:41:50.6321860+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:50.6400874+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:50.6486799+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:50.6611617+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("8"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T22:41:50.6730560+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:41:56.0803067+02:00 0HM6HU7O24IV3:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:41:56.0894629+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:56.1017394+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__connectionId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`ConnectionId` = @__connectionId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:56.1192073+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM `Connections`
WHERE `Id` = @p0;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T22:41:56.1891828+02:00 0HM6HU7O24IV3:00000001 [INF] 2BsvJGOJlxOzN5C6r2nA4A was disconected (adbe00c5)
2021-02-15T22:41:56.1907961+02:00 0HM6HU7O24IV3:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:41:56.1954271+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T22:41:56.1999745+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T22:41:56.2182733+02:00 0HM6HU7O24IV3:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:41:56.2366046+02:00 0HM6HU7O24IV3:00000001 [INF] Executed endpoint '"/messanger"' (99874f2b)
2021-02-15T22:41:56.2368601+02:00 0HM6HU7O24IV3:00000001 [INF] Request finished in 76762.7766ms 101  (791a596a)
2021-02-15T22:42:01.7498353+02:00 0HM6HU7O24IV4:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T22:42:01.7527482+02:00 0HM6HU7O24IV4:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T22:42:01.7535538+02:00 0HM6HU7O24IV4:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:42:01.7536839+02:00 0HM6HU7O24IV4:00000001 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T22:42:01.7540133+02:00 0HM6HU7O24IV4:00000001 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T22:42:01.7558950+02:00 0HM6HU7O24IV4:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:42:01.7654872+02:00 0HM6HU7O24IV4:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:01.7664456+02:00 0HM6HU7O24IV4:00000001 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T22:42:01.7670385+02:00 0HM6HU7O24IV4:00000001 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 12.952ms (afa2e885)
2021-02-15T22:42:01.7671070+02:00 0HM6HU7O24IV4:00000001 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T22:42:01.7673793+02:00 0HM6HU7O24IV4:00000001 [INF] Request finished in 17.6411ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T22:42:02.0799100+02:00 0HM6HU7O24IV4:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/kOQNa3VTT_WubKlvk7srMeJJgPPCrxXnDQXF7tP4vgWx7zJmXT7zVkiD4HflDMUO   (ca22a1cb)
2021-02-15T22:42:02.0821501+02:00 0HM6HU7O24IV4:00000002 [INF] Successfully validated the token. (60169667)
2021-02-15T22:42:02.0826341+02:00 0HM6HU7O24IV4:00000002 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:42:02.0827933+02:00 0HM6HU7O24IV4:00000002 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T22:42:02.0831213+02:00 0HM6HU7O24IV4:00000002 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T22:42:02.0889418+02:00 0HM6HU7O24IV4:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:42:02.1074087+02:00 0HM6HU7O24IV4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:02.1149043+02:00 0HM6HU7O24IV4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:02.1236479+02:00 0HM6HU7O24IV4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:02.1283606+02:00 0HM6HU7O24IV4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:02.1350667+02:00 0HM6HU7O24IV4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T22:42:02.1398545+02:00 0HM6HU7O24IV4:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:42:02.1530847+02:00 0HM6HU7O24IV4:00000002 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200 (e28ccfae)
2021-02-15T22:42:02.1532394+02:00 0HM6HU7O24IV4:00000002 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 70.0381ms (afa2e885)
2021-02-15T22:42:02.1533383+02:00 0HM6HU7O24IV4:00000002 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T22:42:02.1537703+02:00 0HM6HU7O24IV4:00000002 [INF] Request finished in 73.9382ms 200  (791a596a)
2021-02-15T22:42:02.2175507+02:00 0HM6HU7O24IV4:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T22:42:02.2192748+02:00 0HM6HU7O24IV4:00000003 [INF] Successfully validated the token. (60169667)
2021-02-15T22:42:02.2196591+02:00 0HM6HU7O24IV4:00000003 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:42:02.2197388+02:00 0HM6HU7O24IV4:00000003 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T22:42:02.2199737+02:00 0HM6HU7O24IV4:00000003 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T22:42:02.2209506+02:00 0HM6HU7O24IV4:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:42:03.1521111+02:00 0HM6HU7O24IV4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:03.1534465+02:00 0HM6HU7O24IV4:00000003 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T22:42:03.1541621+02:00 0HM6HU7O24IV4:00000003 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 934.1186ms (afa2e885)
2021-02-15T22:42:03.1542364+02:00 0HM6HU7O24IV4:00000003 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T22:42:03.1544987+02:00 0HM6HU7O24IV4:00000003 [INF] Request finished in 937.1431ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T22:42:03.3116002+02:00 0HM6HU7O24IV5:00000001 [INF] Request starting HTTP/1.1 POST https://localhost:5001/messanger/negotiate?negotiateVersion=1  0 (ca22a1cb)
2021-02-15T22:42:03.3121457+02:00 0HM6HU7O24IV5:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T22:42:03.3122364+02:00 0HM6HU7O24IV5:00000001 [INF] Executing endpoint '"/messanger/negotiate"' (500cc934)
2021-02-15T22:42:03.3202863+02:00 0HM6HU7O24IV5:00000001 [INF] Executed endpoint '"/messanger/negotiate"' (99874f2b)
2021-02-15T22:42:03.3207193+02:00 0HM6HU7O24IV5:00000001 [INF] Request finished in 9.1716ms 200 application/json (791a596a)
2021-02-15T22:42:03.3808476+02:00 0HM6HU7O24IV6:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/messanger?id=dRb4pM8J0E3TDi6t-NUtdA   (ca22a1cb)
2021-02-15T22:42:03.3814220+02:00 0HM6HU7O24IV6:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T22:42:03.3815198+02:00 0HM6HU7O24IV6:00000001 [INF] Executing endpoint '"/messanger"' (500cc934)
2021-02-15T22:42:03.4652352+02:00 0HM6HU7O24IV6:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:42:03.4699112+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:03.4824048+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:42:03.4907493+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Connections` (`ConnectionId`, `Created`, `SessionId`, `Updated`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Connections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T22:42:03.5179311+02:00 0HM6HU7O24IV6:00000001 [INF] G0McfdqhIFJCC0inRK3CLw was connected (756a2c21)
2021-02-15T22:42:03.5196041+02:00 0HM6HU7O24IV6:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:42:03.5260639+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:03.5310277+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T22:42:03.5367058+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:42:08.5881839+02:00 0HM6HU7O24IV0:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:42:08.5896927+02:00 0HM6HU7O24IV0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:42:08.5972653+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:08.6033730+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:08.6085042+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:08.6125951+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:42:08.6163845+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T22:42:08.6215412+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:08.6310278+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T22:42:08.6423304+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T22:42:08.6542999+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:08.6589463+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:08.6631752+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:42:08.6679092+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T22:42:08.6760356+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:45:00.9707271+02:00 0HM6HU7O24IV0:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:45:00.9720097+02:00 0HM6HU7O24IV0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:45:00.9799330+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:00.9871993+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:00.9939993+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:01.0017455+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:45:01.0104732+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T22:45:01.0223601+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("6"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:01.0328021+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T22:45:01.1516744+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T22:45:01.1676162+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:01.1800336+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:01.1859252+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:01.1901972+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T22:45:01.2031172+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:45:26.9554658+02:00 0HM6HU7O24IV0:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T22:45:26.9563928+02:00 0HM6HU7O24IV0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:45:26.9721432+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:26.9771187+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:26.9828822+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:26.9928539+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:45:26.9988835+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T22:45:27.0030968+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:27.0111225+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T22:45:27.1269251+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T22:45:27.1478692+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:27.1520987+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:27.1563582+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:45:27.1614872+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T22:45:27.1690962+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:46:56.8400027+02:00 0HM6HU7O24IV6:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:46:56.8540318+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T22:46:56.8718345+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("7"ms) [Parameters=["@__connectionId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`ConnectionId` = @__connectionId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:46:56.8822827+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM `Connections`
WHERE `Id` = @p0;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T22:46:56.9178802+02:00 0HM6HU7O24IV6:00000001 [INF] G0McfdqhIFJCC0inRK3CLw was disconected (e2931434)
2021-02-15T22:46:56.9188387+02:00 0HM6HU7O24IV6:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:46:56.9231018+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T22:46:56.9291510+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T22:46:56.9343408+02:00 0HM6HU7O24IV6:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:46:56.9481501+02:00 0HM6HU7O24IV6:00000001 [INF] Executed endpoint '"/messanger"' (99874f2b)
2021-02-15T22:46:56.9488010+02:00 0HM6HU7O24IV6:00000001 [INF] Request finished in 293567.9025ms 101  (791a596a)
2021-02-15T22:47:01.8035769+02:00 0HM6HU7O24IV0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:47:01.8178707+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T22:47:01.8692459+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("43"ms) [Parameters=["@__connectionId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`ConnectionId` = @__connectionId_0
LIMIT 1" (0723d8ff)
2021-02-15T22:47:01.8994198+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("6"ms) [Parameters=["@p0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM `Connections`
WHERE `Id` = @p0;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T22:47:01.9278577+02:00 0HM6HU7O24IV0:00000001 [INF] 9Ed-sHULlMsoxmU4sCPUtw was disconected (6216dfe9)
2021-02-15T22:47:01.9285851+02:00 0HM6HU7O24IV0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T22:47:01.9300010+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("0"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T22:47:01.9350736+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T22:47:01.9416976+02:00 0HM6HU7O24IV0:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T22:47:01.9523805+02:00 0HM6HU7O24IV0:00000001 [INF] Executed endpoint '"/messanger"' (99874f2b)
2021-02-15T22:47:01.9526248+02:00 0HM6HU7O24IV0:00000001 [INF] Request finished in 385027.8346ms 101  (791a596a)
2021-02-15T23:05:49.6676054+02:00  [INF] Try to run app... (c09a3810)
2021-02-15T23:05:50.8169702+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:05:51.3477118+02:00  [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='lovedb' AND TABLE_NAME='__EFMigrationsHistory';" (0723d8ff)
2021-02-15T23:05:51.3678757+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;" (0723d8ff)
2021-02-15T23:05:51.3727431+02:00  [INF] Миграции не были применены (aa7e97b5)
2021-02-15T23:05:51.4927111+02:00  [INF] Exchanges created and ready to work (5cf186cf)
2021-02-15T23:05:51.7638542+02:00  [INF] App runing sucess! (4879dd0c)
2021-02-15T23:05:51.8012717+02:00  [INF] User profile is available. Using '"C:\Users\Ivan\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-02-15T23:05:51.8444178+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:05:52.0599986+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Created`, `u`.`Login`, `u`.`Password`, `u`.`Updated`
FROM `UserAccounts` AS `u`" (0723d8ff)
2021-02-15T23:05:52.2018526+02:00  [INF] Executed DbCommand ("18"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T23:05:52.2298746+02:00  [INF] Executed DbCommand ("7"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T23:05:52.5737980+02:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-02-15T23:05:52.5766244+02:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-02-15T23:05:52.5793204+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-02-15T23:05:52.5823768+02:00  [INF] Hosting environment: "Development" (c3307c92)
2021-02-15T23:05:52.5845609+02:00  [INF] Content root path: "D:\Рабочий стол\love\Love.Server\Api" (b5d60022)
2021-02-15T23:06:11.7444653+02:00 0HM6HUM2UGNHU:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:06:12.1220507+02:00 0HM6HUM2UGNHU:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:06:12.1296479+02:00 0HM6HUM2UGNHU:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:06:12.1305161+02:00 0HM6HUM2UGNHU:00000001 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:06:12.1613841+02:00 0HM6HUM2UGNHU:00000001 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:06:12.2010886+02:00 0HM6HUM2UGNHU:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:06:12.2529766+02:00 0HM6HUM2UGNHU:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:12.3403605+02:00 0HM6HUM2UGNHU:00000001 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:06:12.4762110+02:00 0HM6HUM2UGNHU:00000001 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 307.9263ms (afa2e885)
2021-02-15T23:06:12.4773507+02:00 0HM6HUM2UGNHU:00000001 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:06:12.4822587+02:00 0HM6HUM2UGNHU:00000001 [INF] Request finished in 741.7948ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:06:12.7641945+02:00 0HM6HUM2UGNHU:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/A0D8DdVEwYGaYgcguYuVYTop5u9w9gB-FYN-Ya3_-a8xBZOq5sOMF9dIDVsiZz9F   (ca22a1cb)
2021-02-15T23:06:12.7671273+02:00 0HM6HUM2UGNHU:00000002 [INF] Successfully validated the token. (60169667)
2021-02-15T23:06:12.7683294+02:00 0HM6HUM2UGNHU:00000002 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:06:12.7684867+02:00 0HM6HUM2UGNHU:00000002 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:06:12.7810503+02:00 0HM6HUM2UGNHU:00000002 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:06:12.7815513+02:00 0HM6HUM2UGNHU:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:06:12.8209294+02:00 0HM6HUM2UGNHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:12.8376980+02:00 0HM6HUM2UGNHU:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:12.8893579+02:00 0HM6HUM2UGNHU:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:12.9037269+02:00 0HM6HUM2UGNHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:12.9201999+02:00 0HM6HUM2UGNHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:06:12.9521934+02:00 0HM6HUM2UGNHU:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:06:13.0950549+02:00 0HM6HUM2UGNHU:00000002 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 313.8844ms (afa2e885)
2021-02-15T23:06:13.0959431+02:00 0HM6HUM2UGNHU:00000002 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:06:13.2443947+02:00 0HM6HUM2UGNHU:00000002 [ERR] Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Application, code=200, text='Goodbye', classId=0, methodId=0 (9e09f053)
2021-02-15T23:06:13.5728731+02:00 0HM6HUM2UGNHU:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.IO.IOException: Синтаксическая ошибка в имени файла, имени папки или метке тома. : 'D:\Рабочий стол\love\Love.Server\Api\15.02.2021 21:06:13.txt'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   at System.IO.File.Create(String path)
   at Api.Services.Logs.Logger.ErrorLog(Exception ex, String message) in D:\Рабочий стол\love\Love.Server\Api.Services\Logs\Logger.cs:line 26
   at ShopPlatforms.Core.Middlewhere.ExceptionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\ExceptionMiddlewhere.cs:line 51
   at ShopPlatform.Middlewhere.XssProtectionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\XssProtectionMiddlewhere.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-15T23:06:13.5871266+02:00 0HM6HUM2UGNHU:00000002 [INF] Request finished in 822.9132ms 500 text/plain (791a596a)
2021-02-15T23:06:32.3127653+02:00 0HM6HUM2UGNHV:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:06:32.3212489+02:00 0HM6HUM2UGNHV:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:06:32.3230914+02:00 0HM6HUM2UGNHV:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:06:32.3238050+02:00 0HM6HUM2UGNHV:00000001 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:06:32.3243050+02:00 0HM6HUM2UGNHV:00000001 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:06:32.3389258+02:00 0HM6HUM2UGNHV:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:06:32.3496318+02:00 0HM6HUM2UGNHV:00000001 [INF] Executed DbCommand ("5"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:32.3526933+02:00 0HM6HUM2UGNHV:00000001 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:06:32.3535600+02:00 0HM6HUM2UGNHV:00000001 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 29.1542ms (afa2e885)
2021-02-15T23:06:32.3536531+02:00 0HM6HUM2UGNHV:00000001 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:06:32.3539639+02:00 0HM6HUM2UGNHV:00000001 [INF] Request finished in 41.8182ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:06:32.6445158+02:00 0HM6HUM2UGNHV:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/mv_RdhhVGMs29Ey06kDtwUCS2CiOH-Ut0LltmrhP7XpZWsaPQHr-uh_vVXwBrw42   (ca22a1cb)
2021-02-15T23:06:32.6478876+02:00 0HM6HUM2UGNHV:00000002 [INF] Successfully validated the token. (60169667)
2021-02-15T23:06:32.6481784+02:00 0HM6HUM2UGNHV:00000002 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:06:32.6482281+02:00 0HM6HUM2UGNHV:00000002 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:06:32.6483245+02:00 0HM6HUM2UGNHV:00000002 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:06:32.6486883+02:00 0HM6HUM2UGNHV:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:06:32.6555449+02:00 0HM6HUM2UGNHV:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:32.6603400+02:00 0HM6HUM2UGNHV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:32.6654095+02:00 0HM6HUM2UGNHV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:32.6699670+02:00 0HM6HUM2UGNHV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:32.6745695+02:00 0HM6HUM2UGNHV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:06:32.6763877+02:00 0HM6HUM2UGNHV:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:06:32.7482884+02:00 0HM6HUM2UGNHV:00000002 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 99.8912ms (afa2e885)
2021-02-15T23:06:32.7486459+02:00 0HM6HUM2UGNHV:00000002 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:06:32.8861581+02:00 0HM6HUM2UGNHV:00000002 [ERR] Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Application, code=200, text='Goodbye', classId=0, methodId=0 (9e09f053)
2021-02-15T23:06:33.1103482+02:00 0HM6HUM2UGNHV:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.IO.IOException: Синтаксическая ошибка в имени файла, имени папки или метке тома. : 'D:\Рабочий стол\love\Love.Server\Api\15.02.2021 21:06:32.txt'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   at System.IO.File.Create(String path)
   at Api.Services.Logs.Logger.ErrorLog(Exception ex, String message) in D:\Рабочий стол\love\Love.Server\Api.Services\Logs\Logger.cs:line 26
   at ShopPlatforms.Core.Middlewhere.ExceptionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\ExceptionMiddlewhere.cs:line 51
   at ShopPlatform.Middlewhere.XssProtectionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\XssProtectionMiddlewhere.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-15T23:06:33.1112897+02:00 0HM6HUM2UGNHV:00000002 [INF] Request finished in 466.8503ms 500 text/plain (791a596a)
2021-02-15T23:06:47.6161814+02:00 0HM6HUM2UGNI0:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:06:47.6189293+02:00 0HM6HUM2UGNI0:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:06:47.6195069+02:00 0HM6HUM2UGNI0:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:06:47.6196378+02:00 0HM6HUM2UGNI0:00000001 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:06:47.6200463+02:00 0HM6HUM2UGNI0:00000001 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:06:47.6214364+02:00 0HM6HUM2UGNI0:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:06:47.6305640+02:00 0HM6HUM2UGNI0:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:47.6316831+02:00 0HM6HUM2UGNI0:00000001 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:06:47.6324387+02:00 0HM6HUM2UGNI0:00000001 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 12.2898ms (afa2e885)
2021-02-15T23:06:47.6325360+02:00 0HM6HUM2UGNI0:00000001 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:06:47.6328837+02:00 0HM6HUM2UGNI0:00000001 [INF] Request finished in 16.8408ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:06:47.9145488+02:00 0HM6HUM2UGNI0:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/9nFnrjr1WjsOynJ7v_4b6oQCowykqGUz-Aw7HBD5WjutUyrtuoUcKqeXb-Oqyyv6   (ca22a1cb)
2021-02-15T23:06:47.9168000+02:00 0HM6HUM2UGNI0:00000002 [INF] Successfully validated the token. (60169667)
2021-02-15T23:06:47.9176741+02:00 0HM6HUM2UGNI0:00000002 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:06:47.9178977+02:00 0HM6HUM2UGNI0:00000002 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:06:47.9183103+02:00 0HM6HUM2UGNI0:00000002 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:06:47.9206248+02:00 0HM6HUM2UGNI0:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:06:47.9349706+02:00 0HM6HUM2UGNI0:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:47.9418290+02:00 0HM6HUM2UGNI0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:47.9465619+02:00 0HM6HUM2UGNI0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:47.9574223+02:00 0HM6HUM2UGNI0:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:06:47.9649078+02:00 0HM6HUM2UGNI0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:06:47.9694537+02:00 0HM6HUM2UGNI0:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:06:49.6875512+02:00 0HM6HUM2UGNI0:00000002 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 1769.0849ms (afa2e885)
2021-02-15T23:06:49.6878912+02:00 0HM6HUM2UGNI0:00000002 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:06:49.7831226+02:00 0HM6HUM2UGNI0:00000002 [ERR] Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Application, code=200, text='Goodbye', classId=0, methodId=0 (9e09f053)
2021-02-15T23:06:49.9914634+02:00 0HM6HUM2UGNI0:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.IO.IOException: Синтаксическая ошибка в имени файла, имени папки или метке тома. : 'D:\Рабочий стол\love\Love.Server\Api\15.02.2021 21:06:49.txt'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   at System.IO.File.Create(String path)
   at Api.Services.Logs.Logger.ErrorLog(Exception ex, String message) in D:\Рабочий стол\love\Love.Server\Api.Services\Logs\Logger.cs:line 26
   at ShopPlatforms.Core.Middlewhere.ExceptionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\ExceptionMiddlewhere.cs:line 51
   at ShopPlatform.Middlewhere.XssProtectionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\XssProtectionMiddlewhere.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-15T23:06:49.9932117+02:00 0HM6HUM2UGNI0:00000002 [INF] Request finished in 2078.7718ms 500 text/plain (791a596a)
2021-02-15T23:07:19.7696876+02:00 0HM6HUM2UGNI1:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:07:19.7723270+02:00 0HM6HUM2UGNI1:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:07:19.7727389+02:00 0HM6HUM2UGNI1:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:07:19.7728309+02:00 0HM6HUM2UGNI1:00000001 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:07:19.7731441+02:00 0HM6HUM2UGNI1:00000001 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:07:19.7746191+02:00 0HM6HUM2UGNI1:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:07:19.7848378+02:00 0HM6HUM2UGNI1:00000001 [INF] Executed DbCommand ("4"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:07:19.7862699+02:00 0HM6HUM2UGNI1:00000001 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:07:19.7872303+02:00 0HM6HUM2UGNI1:00000001 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 13.959ms (afa2e885)
2021-02-15T23:07:19.7873153+02:00 0HM6HUM2UGNI1:00000001 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:07:19.7880882+02:00 0HM6HUM2UGNI1:00000001 [INF] Request finished in 18.3907ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:07:20.0045604+02:00 0HM6HUM2UGNI1:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/1FIaKeRf4sPYwWgyodJl8zmq7jjrcgrmYzQtL1baPGp3fW2iWhCHBkUxF9E69aaq   (ca22a1cb)
2021-02-15T23:07:20.0061667+02:00 0HM6HUM2UGNI1:00000002 [INF] Successfully validated the token. (60169667)
2021-02-15T23:07:20.0066313+02:00 0HM6HUM2UGNI1:00000002 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:07:20.0068196+02:00 0HM6HUM2UGNI1:00000002 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:07:20.0071347+02:00 0HM6HUM2UGNI1:00000002 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:07:20.0083396+02:00 0HM6HUM2UGNI1:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:07:20.0211952+02:00 0HM6HUM2UGNI1:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:07:20.0266705+02:00 0HM6HUM2UGNI1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:07:20.0348130+02:00 0HM6HUM2UGNI1:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:07:20.0421752+02:00 0HM6HUM2UGNI1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:07:20.0496238+02:00 0HM6HUM2UGNI1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:07:20.0589494+02:00 0HM6HUM2UGNI1:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:07:20.1266459+02:00 0HM6HUM2UGNI1:00000002 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 119.3622ms (afa2e885)
2021-02-15T23:07:20.1270344+02:00 0HM6HUM2UGNI1:00000002 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:07:20.2270361+02:00 0HM6HUM2UGNI1:00000002 [ERR] Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Application, code=200, text='Goodbye', classId=0, methodId=0 (9e09f053)
2021-02-15T23:07:20.4286584+02:00 0HM6HUM2UGNI1:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.IO.IOException: Синтаксическая ошибка в имени файла, имени папки или метке тома. : 'D:\Рабочий стол\love\Love.Server\Api\15.02.2021 21:07:20.txt'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   at System.IO.File.Create(String path)
   at Api.Services.Logs.Logger.ErrorLog(Exception ex, String message) in D:\Рабочий стол\love\Love.Server\Api.Services\Logs\Logger.cs:line 26
   at ShopPlatforms.Core.Middlewhere.ExceptionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\ExceptionMiddlewhere.cs:line 51
   at ShopPlatform.Middlewhere.XssProtectionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\XssProtectionMiddlewhere.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-15T23:07:20.4299266+02:00 0HM6HUM2UGNI1:00000002 [INF] Request finished in 425.4432ms 500 text/plain (791a596a)
2021-02-15T23:08:12.9206928+02:00  [INF] Try to run app... (c09a3810)
2021-02-15T23:08:14.0886091+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:08:14.6056766+02:00  [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='lovedb' AND TABLE_NAME='__EFMigrationsHistory';" (0723d8ff)
2021-02-15T23:08:14.6226498+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;" (0723d8ff)
2021-02-15T23:08:14.6276329+02:00  [INF] Миграции не были применены (aa7e97b5)
2021-02-15T23:08:14.7587894+02:00  [INF] Exchanges created and ready to work (5cf186cf)
2021-02-15T23:08:15.0072569+02:00  [INF] App runing sucess! (4879dd0c)
2021-02-15T23:08:15.0416901+02:00  [INF] User profile is available. Using '"C:\Users\Ivan\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-02-15T23:08:15.0834593+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:08:15.2905208+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Created`, `u`.`Login`, `u`.`Password`, `u`.`Updated`
FROM `UserAccounts` AS `u`" (0723d8ff)
2021-02-15T23:08:15.4329425+02:00  [INF] Executed DbCommand ("13"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T23:08:15.4598844+02:00  [INF] Executed DbCommand ("8"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T23:08:15.8024791+02:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-02-15T23:08:15.8053707+02:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-02-15T23:08:15.8131107+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-02-15T23:08:15.8163717+02:00  [INF] Hosting environment: "Development" (c3307c92)
2021-02-15T23:08:15.8190132+02:00  [INF] Content root path: "D:\Рабочий стол\love\Love.Server\Api" (b5d60022)
2021-02-15T23:08:30.3101092+02:00 0HM6HUNC82MK2:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:08:30.6889438+02:00 0HM6HUNC82MK2:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:08:30.7002734+02:00 0HM6HUNC82MK2:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:08:30.7011809+02:00 0HM6HUNC82MK2:00000001 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:08:30.7340901+02:00 0HM6HUNC82MK2:00000001 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:08:30.7812063+02:00 0HM6HUNC82MK2:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:08:30.8227595+02:00 0HM6HUNC82MK2:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:08:30.9154418+02:00 0HM6HUNC82MK2:00000001 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:08:31.0438537+02:00 0HM6HUNC82MK2:00000001 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 301.305ms (afa2e885)
2021-02-15T23:08:31.0452068+02:00 0HM6HUNC82MK2:00000001 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:08:31.0517479+02:00 0HM6HUNC82MK2:00000001 [INF] Request finished in 744.3854ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:08:31.3418766+02:00 0HM6HUNC82MK2:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/w-XbRbbj31FLBKBVOV5rmXI6dH99wXG518UaW4hqJVGjtcGMaiQ9IzHVxCyKtTV5   (ca22a1cb)
2021-02-15T23:08:31.3466859+02:00 0HM6HUNC82MK2:00000002 [INF] Successfully validated the token. (60169667)
2021-02-15T23:08:31.3491629+02:00 0HM6HUNC82MK2:00000002 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:08:31.3493389+02:00 0HM6HUNC82MK2:00000002 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:08:31.3616713+02:00 0HM6HUNC82MK2:00000002 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:08:31.3629204+02:00 0HM6HUNC82MK2:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:08:31.3973620+02:00 0HM6HUNC82MK2:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:08:31.4131829+02:00 0HM6HUNC82MK2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:08:31.4597292+02:00 0HM6HUNC82MK2:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:08:31.4734904+02:00 0HM6HUNC82MK2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:08:31.4889756+02:00 0HM6HUNC82MK2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:08:31.5249787+02:00 0HM6HUNC82MK2:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:08:31.6533253+02:00 0HM6HUNC82MK2:00000002 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 291.5067ms (afa2e885)
2021-02-15T23:08:31.6537706+02:00 0HM6HUNC82MK2:00000002 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:08:31.8062313+02:00 0HM6HUNC82MK2:00000002 [ERR] Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Application, code=200, text='Goodbye', classId=0, methodId=0 (9e09f053)
2021-02-15T23:08:32.1040201+02:00 0HM6HUNC82MK2:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.IO.IOException: Синтаксическая ошибка в имени файла, имени папки или метке тома. : 'D:\Рабочий стол\love\Love.Server\Api\15.02.2021 21:08:31.txt'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   at System.IO.File.Create(String path)
   at Api.Services.Logs.Logger.ErrorLog(Exception ex, String message) in D:\Рабочий стол\love\Love.Server\Api.Services\Logs\Logger.cs:line 26
   at ShopPlatforms.Core.Middlewhere.ExceptionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\ExceptionMiddlewhere.cs:line 51
   at ShopPlatform.Middlewhere.XssProtectionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\XssProtectionMiddlewhere.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-15T23:08:32.1166690+02:00 0HM6HUNC82MK2:00000002 [INF] Request finished in 775.152ms 500 text/plain (791a596a)
2021-02-15T23:09:00.8930441+02:00  [INF] Try to run app... (c09a3810)
2021-02-15T23:09:02.0724653+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:09:02.5971741+02:00  [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='lovedb' AND TABLE_NAME='__EFMigrationsHistory';" (0723d8ff)
2021-02-15T23:09:02.6159515+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;" (0723d8ff)
2021-02-15T23:09:02.6227272+02:00  [INF] Миграции не были применены (aa7e97b5)
2021-02-15T23:09:02.7446485+02:00  [INF] Exchanges created and ready to work (5cf186cf)
2021-02-15T23:09:02.9896823+02:00  [INF] App runing sucess! (4879dd0c)
2021-02-15T23:09:03.0220073+02:00  [INF] User profile is available. Using '"C:\Users\Ivan\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-02-15T23:09:03.0647291+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:09:03.2732999+02:00  [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Created`, `u`.`Login`, `u`.`Password`, `u`.`Updated`
FROM `UserAccounts` AS `u`" (0723d8ff)
2021-02-15T23:09:03.4191695+02:00  [INF] Executed DbCommand ("15"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T23:09:03.4515760+02:00  [INF] Executed DbCommand ("9"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T23:09:03.7935434+02:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-02-15T23:09:03.7965382+02:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-02-15T23:09:03.8006878+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-02-15T23:09:03.8036743+02:00  [INF] Hosting environment: "Development" (c3307c92)
2021-02-15T23:09:03.8063545+02:00  [INF] Content root path: "D:\Рабочий стол\love\Love.Server\Api" (b5d60022)
2021-02-15T23:09:32.2155198+02:00 0HM6HUNUM6AT5:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:09:32.6971568+02:00 0HM6HUNUM6AT5:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:09:32.7102063+02:00 0HM6HUNUM6AT5:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:09:32.7113976+02:00 0HM6HUNUM6AT5:00000001 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:09:32.7642730+02:00 0HM6HUNUM6AT5:00000001 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:09:32.8340801+02:00 0HM6HUNUM6AT5:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:09:32.8768700+02:00 0HM6HUNUM6AT5:00000001 [INF] Executed DbCommand ("6"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:09:32.9646434+02:00 0HM6HUNUM6AT5:00000001 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:09:33.1038968+02:00 0HM6HUNUM6AT5:00000001 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 331.747ms (afa2e885)
2021-02-15T23:09:33.1050722+02:00 0HM6HUNUM6AT5:00000001 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:09:33.1108806+02:00 0HM6HUNUM6AT5:00000001 [INF] Request finished in 900.1007ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:09:33.3219205+02:00 0HM6HUNUM6AT5:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/moIJzBo9WHpzyhv9exSlJ1M0HPxEKFTeTQMbo5l-06whaSh0NPkdUoMr9a-ddnV8   (ca22a1cb)
2021-02-15T23:09:33.3262573+02:00 0HM6HUNUM6AT5:00000002 [INF] Successfully validated the token. (60169667)
2021-02-15T23:09:33.3276710+02:00 0HM6HUNUM6AT5:00000002 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:09:33.3278752+02:00 0HM6HUNUM6AT5:00000002 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:09:33.3424272+02:00 0HM6HUNUM6AT5:00000002 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:09:33.3459208+02:00 0HM6HUNUM6AT5:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:09:33.3830440+02:00 0HM6HUNUM6AT5:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:09:33.3959853+02:00 0HM6HUNUM6AT5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:09:33.4558262+02:00 0HM6HUNUM6AT5:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:09:33.4699071+02:00 0HM6HUNUM6AT5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:09:33.4866739+02:00 0HM6HUNUM6AT5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:09:33.5192733+02:00 0HM6HUNUM6AT5:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:09:33.6379733+02:00 0HM6HUNUM6AT5:00000002 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 295.3581ms (afa2e885)
2021-02-15T23:09:33.6383258+02:00 0HM6HUNUM6AT5:00000002 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:09:33.7887213+02:00 0HM6HUNUM6AT5:00000002 [ERR] Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Application, code=200, text='Goodbye', classId=0, methodId=0 (9e09f053)
2021-02-15T23:09:34.0910067+02:00 0HM6HUNUM6AT5:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.IO.IOException: Синтаксическая ошибка в имени файла, имени папки или метке тома. : 'D:\Рабочий стол\love\Love.Server\Api\15.02.2021 21:09:33.txt'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   at System.IO.File.Create(String path)
   at Api.Services.Logs.Logger.ErrorLog(Exception ex, String message) in D:\Рабочий стол\love\Love.Server\Api.Services\Logs\Logger.cs:line 26
   at ShopPlatforms.Core.Middlewhere.ExceptionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\ExceptionMiddlewhere.cs:line 51
   at ShopPlatform.Middlewhere.XssProtectionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\XssProtectionMiddlewhere.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-15T23:09:34.1049328+02:00 0HM6HUNUM6AT5:00000002 [INF] Request finished in 783.0948ms 500 text/plain (791a596a)
2021-02-15T23:10:00.2828343+02:00  [INF] Application is shutting down... (90f52c38)
2021-02-15T23:10:05.5409194+02:00  [INF] Try to run app... (c09a3810)
2021-02-15T23:10:06.8551192+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:10:07.3777726+02:00  [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='lovedb' AND TABLE_NAME='__EFMigrationsHistory';" (0723d8ff)
2021-02-15T23:10:07.3986712+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;" (0723d8ff)
2021-02-15T23:10:07.4034982+02:00  [INF] Миграции не были применены (aa7e97b5)
2021-02-15T23:10:07.5202070+02:00  [INF] Exchanges created and ready to work (5cf186cf)
2021-02-15T23:10:07.7728179+02:00  [INF] App runing sucess! (4879dd0c)
2021-02-15T23:10:07.8054465+02:00  [INF] User profile is available. Using '"C:\Users\Ivan\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-02-15T23:10:07.8484941+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:10:08.0563797+02:00  [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Created`, `u`.`Login`, `u`.`Password`, `u`.`Updated`
FROM `UserAccounts` AS `u`" (0723d8ff)
2021-02-15T23:10:08.2220373+02:00  [INF] Executed DbCommand ("23"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T23:10:08.2343185+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T23:10:08.5929569+02:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-02-15T23:10:08.5966372+02:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-02-15T23:10:08.6044867+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-02-15T23:10:08.6073217+02:00  [INF] Hosting environment: "Development" (c3307c92)
2021-02-15T23:10:08.6108480+02:00  [INF] Content root path: "D:\Рабочий стол\love\Love.Server\Api" (b5d60022)
2021-02-15T23:10:19.0465730+02:00 0HM6HUOCKUBHK:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:10:19.4318490+02:00 0HM6HUOCKUBHK:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:10:19.4394603+02:00 0HM6HUOCKUBHK:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:10:19.4405244+02:00 0HM6HUOCKUBHK:00000001 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:10:19.4679705+02:00 0HM6HUOCKUBHK:00000001 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:10:19.5057363+02:00 0HM6HUOCKUBHK:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:10:19.5348530+02:00 0HM6HUOCKUBHK:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:10:19.6247755+02:00 0HM6HUOCKUBHK:00000001 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:10:19.7484462+02:00 0HM6HUOCKUBHK:00000001 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 274.6848ms (afa2e885)
2021-02-15T23:10:19.7496016+02:00 0HM6HUOCKUBHK:00000001 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:10:19.7559463+02:00 0HM6HUOCKUBHK:00000001 [INF] Request finished in 712.6668ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:10:20.0333629+02:00 0HM6HUOCKUBHK:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/haz3mTQPF9tj9jF2FhrOrMxx4FvvASj7lLSoM0S2j473QYs2EpxOdbEL45wmXXCH   (ca22a1cb)
2021-02-15T23:10:20.0393473+02:00 0HM6HUOCKUBHK:00000002 [INF] Successfully validated the token. (60169667)
2021-02-15T23:10:20.0461091+02:00 0HM6HUOCKUBHK:00000002 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:10:20.0463299+02:00 0HM6HUOCKUBHK:00000002 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:10:20.0613974+02:00 0HM6HUOCKUBHK:00000002 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:10:20.0625641+02:00 0HM6HUOCKUBHK:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:10:20.0934442+02:00 0HM6HUOCKUBHK:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:10:20.1075852+02:00 0HM6HUOCKUBHK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:10:20.1568712+02:00 0HM6HUOCKUBHK:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:10:20.1702381+02:00 0HM6HUOCKUBHK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:10:20.1859168+02:00 0HM6HUOCKUBHK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:10:20.2282778+02:00 0HM6HUOCKUBHK:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:10:20.3494249+02:00 0HM6HUOCKUBHK:00000002 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 287.8647ms (afa2e885)
2021-02-15T23:10:20.3498064+02:00 0HM6HUOCKUBHK:00000002 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:10:20.4976673+02:00 0HM6HUOCKUBHK:00000002 [ERR] Already closed: The AMQP operation was interrupted: AMQP close-reason, initiated by Application, code=200, text='Goodbye', classId=0, methodId=0 (9e09f053)
2021-02-15T23:10:20.7929105+02:00 0HM6HUOCKUBHK:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.IO.IOException: Синтаксическая ошибка в имени файла, имени папки или метке тома. : 'D:\Рабочий стол\love\Love.Server\Api\15.02.2021 21:10:20.txt'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   at System.IO.File.Create(String path)
   at Api.Services.Logs.Logger.ErrorLog(Exception ex, String message) in D:\Рабочий стол\love\Love.Server\Api.Services\Logs\Logger.cs:line 26
   at ShopPlatforms.Core.Middlewhere.ExceptionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\ExceptionMiddlewhere.cs:line 51
   at ShopPlatform.Middlewhere.XssProtectionMiddlewhere.InvokeAsync(HttpContext context) in D:\Рабочий стол\love\Love.Server\Api.Core\Middlewhere\XssProtectionMiddlewhere.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-15T23:10:20.8056609+02:00 0HM6HUOCKUBHK:00000002 [INF] Request finished in 772.8132ms 500 text/plain (791a596a)
2021-02-15T23:11:08.7178522+02:00  [INF] Try to run app... (c09a3810)
2021-02-15T23:11:10.0718008+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:10.6092759+02:00  [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='lovedb' AND TABLE_NAME='__EFMigrationsHistory';" (0723d8ff)
2021-02-15T23:11:10.6307553+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;" (0723d8ff)
2021-02-15T23:11:10.6388310+02:00  [INF] Миграции не были применены (aa7e97b5)
2021-02-15T23:11:10.7715159+02:00  [INF] Exchanges created and ready to work (5cf186cf)
2021-02-15T23:11:11.0380544+02:00  [INF] App runing sucess! (4879dd0c)
2021-02-15T23:11:11.0705628+02:00  [INF] User profile is available. Using '"C:\Users\Ivan\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2021-02-15T23:11:11.1172977+02:00  [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:11.3256927+02:00  [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Created`, `u`.`Login`, `u`.`Password`, `u`.`Updated`
FROM `UserAccounts` AS `u`" (0723d8ff)
2021-02-15T23:11:11.4768140+02:00  [INF] Executed DbCommand ("17"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T23:11:11.4954261+02:00  [INF] Executed DbCommand ("1"ms) [Parameters=["@__user_Login_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`UserName` = @__user_Login_0)" (0723d8ff)
2021-02-15T23:11:11.8473260+02:00  [INF] Now listening on: "https://localhost:5001" (d826f4b8)
2021-02-15T23:11:11.8497531+02:00  [INF] Now listening on: "http://localhost:5000" (d826f4b8)
2021-02-15T23:11:11.8557170+02:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2021-02-15T23:11:11.8582985+02:00  [INF] Hosting environment: "Development" (c3307c92)
2021-02-15T23:11:11.8605959+02:00  [INF] Content root path: "D:\Рабочий стол\love\Love.Server\Api" (b5d60022)
2021-02-15T23:11:31.5968168+02:00 0HM6HUP28OCPH:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:11:31.9561244+02:00 0HM6HUP28OCPH:00000001 [INF] Failed to validate the token. (616bef97)
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-02-15T23:11:31.9575755+02:00 0HM6HUP28OCPH:00000001 [INF] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'." (48071232)
2021-02-15T23:11:31.9866457+02:00 0HM6HUP28OCPH:00000001 [INF] Authorization failed. (b15dd539)
2021-02-15T23:11:31.9950649+02:00 0HM6HUP28OCPH:00000001 [INF] AuthenticationScheme: "Bearer" was challenged. (d45f1f38)
2021-02-15T23:11:32.0071039+02:00 0HM6HUP28OCPH:00000001 [INF] Request finished in 413.5048ms 401  (791a596a)
2021-02-15T23:11:32.0884140+02:00 0HM6HUP28OCPH:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/Account/longsessionupdate application/json; charset=utf-8 51 (ca22a1cb)
2021-02-15T23:11:32.0948017+02:00 0HM6HUP28OCPH:00000002 [INF] Failed to validate the token. (616bef97)
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-02-15T23:11:32.0949198+02:00 0HM6HUP28OCPH:00000002 [INF] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'." (48071232)
2021-02-15T23:11:32.0957755+02:00 0HM6HUP28OCPH:00000002 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)"' (500cc934)
2021-02-15T23:11:32.1379874+02:00 0HM6HUP28OCPH:00000002 [INF] Route matched with "{action = \"LongSessionUpdate\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LongSessionUpdateAsync(Api.Models.RequestModels.AccountController.RefreshTokenUpdateModel)" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:11:32.1744816+02:00 0HM6HUP28OCPH:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:32.3830633+02:00 0HM6HUP28OCPH:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=["@__value_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `l`.`Id`, `l`.`Created`, `l`.`ExpiresIn`, `l`.`FingerPrint`, `l`.`Updated`, `l`.`UserId`, `l`.`Value`
FROM `LongSessions` AS `l`
WHERE `l`.`Value` = @__value_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:32.4028166+02:00 0HM6HUP28OCPH:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__session_UserId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__session_UserId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:32.4842375+02:00 0HM6HUP28OCPH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255), @__longSession_1='?' (Size = 4000), @__fingerPrint_2='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `l`.`Id`, `l`.`Created`, `l`.`ExpiresIn`, `l`.`FingerPrint`, `l`.`Updated`, `l`.`UserId`, `l`.`Value`
FROM `LongSessions` AS `l`
WHERE ((`l`.`UserId` = @__userId_0) AND (`l`.`Value` = @__longSession_1)) AND (`l`.`FingerPrint` = @__fingerPrint_2)
LIMIT 1" (0723d8ff)
2021-02-15T23:11:32.6803460+02:00 0HM6HUP28OCPH:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@p6='?' (DbType = Int64), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255), @p5='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""UPDATE `LongSessions` SET `Created` = @p0, `ExpiresIn` = @p1, `FingerPrint` = @p2, `Updated` = @p3, `UserId` = @p4, `Value` = @p5
WHERE `Id` = @p6;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T23:11:32.8547040+02:00 0HM6HUP28OCPH:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:11:32.8941665+02:00 0HM6HUP28OCPH:00000002 [INF] Executing JsonResult, writing value of type '"Shared.AuthResult"'. (2f513669)
2021-02-15T23:11:32.9197139+02:00 0HM6HUP28OCPH:00000002 [INF] Executed action "Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)" in 774.5368ms (afa2e885)
2021-02-15T23:11:32.9205484+02:00 0HM6HUP28OCPH:00000002 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)"' (99874f2b)
2021-02-15T23:11:32.9248179+02:00 0HM6HUP28OCPH:00000002 [INF] Request finished in 836.4618ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:11:33.3198810+02:00 0HM6HUP28OCPH:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/LNYi4e15UrIEUL82yZj4sycfuuGlZyQg0C5eot4zB_KpRkleyxbRtGLGhCSRm6GL   (ca22a1cb)
2021-02-15T23:11:33.3378530+02:00 0HM6HUP28OCPH:00000003 [INF] Successfully validated the token. (60169667)
2021-02-15T23:11:33.3407690+02:00 0HM6HUP28OCPH:00000003 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:11:33.3410300+02:00 0HM6HUP28OCPH:00000003 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:11:33.3469628+02:00 0HM6HUP28OCPH:00000003 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:11:33.3480569+02:00 0HM6HUP28OCPH:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:33.3707493+02:00 0HM6HUP28OCPH:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:33.3848721+02:00 0HM6HUP28OCPH:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:33.4130488+02:00 0HM6HUP28OCPH:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:33.4291134+02:00 0HM6HUP28OCPH:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:33.4435621+02:00 0HM6HUP28OCPH:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:11:33.4668737+02:00 0HM6HUP28OCPH:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:33.4985087+02:00 0HM6HUP28OCPH:00000003 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200 (e28ccfae)
2021-02-15T23:11:33.4987075+02:00 0HM6HUP28OCPH:00000003 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 151.6202ms (afa2e885)
2021-02-15T23:11:33.4987765+02:00 0HM6HUP28OCPH:00000003 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:11:33.4992458+02:00 0HM6HUP28OCPH:00000003 [INF] Request finished in 179.7694ms 200  (791a596a)
2021-02-15T23:11:33.5651800+02:00 0HM6HUP28OCPH:00000004 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:11:33.5656405+02:00 0HM6HUP28OCPH:00000004 [INF] Successfully validated the token. (60169667)
2021-02-15T23:11:33.5664439+02:00 0HM6HUP28OCPH:00000004 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:11:33.5667415+02:00 0HM6HUP28OCPH:00000004 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:11:33.5712976+02:00 0HM6HUP28OCPH:00000004 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:11:33.5849307+02:00 0HM6HUP28OCPH:00000004 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:33.5997267+02:00 0HM6HUP28OCPH:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:33.6017473+02:00 0HM6HUP28OCPH:00000004 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:11:33.6069458+02:00 0HM6HUP28OCPH:00000004 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 35.5515ms (afa2e885)
2021-02-15T23:11:33.6073058+02:00 0HM6HUP28OCPH:00000004 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:11:33.6076641+02:00 0HM6HUP28OCPH:00000004 [INF] Request finished in 42.5059ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:11:33.7661482+02:00 0HM6HUP28OCPI:00000001 [INF] Request starting HTTP/1.1 POST https://localhost:5001/messanger/negotiate?negotiateVersion=1  0 (ca22a1cb)
2021-02-15T23:11:33.7670794+02:00 0HM6HUP28OCPI:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:11:33.7672049+02:00 0HM6HUP28OCPI:00000001 [INF] Executing endpoint '"/messanger/negotiate"' (500cc934)
2021-02-15T23:11:33.7949313+02:00 0HM6HUP28OCPI:00000001 [INF] Executed endpoint '"/messanger/negotiate"' (99874f2b)
2021-02-15T23:11:33.7950299+02:00 0HM6HUP28OCPI:00000001 [INF] Request finished in 28.9362ms 200 application/json (791a596a)
2021-02-15T23:11:33.8396416+02:00 0HM6HUP28OCPJ:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/messanger?id=rSMATC1ZMJZobSf_wGOpZg   (ca22a1cb)
2021-02-15T23:11:33.8401196+02:00 0HM6HUP28OCPJ:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:11:33.8402522+02:00 0HM6HUP28OCPJ:00000001 [INF] Executing endpoint '"/messanger"' (500cc934)
2021-02-15T23:11:33.9823358+02:00 0HM6HUP28OCPJ:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:34.0004229+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:34.0161118+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255), @__sessionCacheKey_SessionId_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`UserId` = @__userId_0) AND (`s`.`SessionId` = @__sessionCacheKey_SessionId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:11:34.0408427+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:11:34.0999096+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Connections` (`ConnectionId`, `Created`, `SessionId`, `Updated`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Connections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:11:34.1349167+02:00 0HM6HUP28OCPJ:00000001 [INF] iT4Hl_LFsSEwMB0_WnPUhA was connected (c59d50a9)
2021-02-15T23:11:34.1367198+02:00 0HM6HUP28OCPJ:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:34.1455629+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:34.1575086+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T23:11:34.1842726+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:11:53.9022134+02:00 0HM6HUP28OCPK:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:11:53.9055786+02:00 0HM6HUP28OCPK:00000001 [INF] Failed to validate the token. (616bef97)
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-02-15T23:11:53.9059457+02:00 0HM6HUP28OCPK:00000001 [INF] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'." (48071232)
2021-02-15T23:11:53.9064364+02:00 0HM6HUP28OCPK:00000001 [INF] Authorization failed. (b15dd539)
2021-02-15T23:11:53.9070996+02:00 0HM6HUP28OCPK:00000001 [INF] AuthenticationScheme: "Bearer" was challenged. (d45f1f38)
2021-02-15T23:11:53.9078269+02:00 0HM6HUP28OCPK:00000001 [INF] Request finished in 5.8875ms 401  (791a596a)
2021-02-15T23:11:53.9831004+02:00 0HM6HUP28OCPK:00000002 [INF] Request starting HTTP/1.1 POST https://localhost:5001/Account/longsessionupdate application/json; charset=utf-8 51 (ca22a1cb)
2021-02-15T23:11:53.9854201+02:00 0HM6HUP28OCPK:00000002 [INF] Failed to validate the token. (616bef97)
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-02-15T23:11:53.9856669+02:00 0HM6HUP28OCPK:00000002 [INF] "Bearer" was not authenticated. Failure message: "IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'." (48071232)
2021-02-15T23:11:53.9858129+02:00 0HM6HUP28OCPK:00000002 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)"' (500cc934)
2021-02-15T23:11:53.9862166+02:00 0HM6HUP28OCPK:00000002 [INF] Route matched with "{action = \"LongSessionUpdate\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LongSessionUpdateAsync(Api.Models.RequestModels.AccountController.RefreshTokenUpdateModel)" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:11:53.9873292+02:00 0HM6HUP28OCPK:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:53.9960928+02:00 0HM6HUP28OCPK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__value_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `l`.`Id`, `l`.`Created`, `l`.`ExpiresIn`, `l`.`FingerPrint`, `l`.`Updated`, `l`.`UserId`, `l`.`Value`
FROM `LongSessions` AS `l`
WHERE `l`.`Value` = @__value_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:54.0003671+02:00 0HM6HUP28OCPK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__session_UserId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__session_UserId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:54.0101860+02:00 0HM6HUP28OCPK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255), @__longSession_1='?' (Size = 4000), @__fingerPrint_2='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `l`.`Id`, `l`.`Created`, `l`.`ExpiresIn`, `l`.`FingerPrint`, `l`.`Updated`, `l`.`UserId`, `l`.`Value`
FROM `LongSessions` AS `l`
WHERE ((`l`.`UserId` = @__userId_0) AND (`l`.`Value` = @__longSession_1)) AND (`l`.`FingerPrint` = @__fingerPrint_2)
LIMIT 1" (0723d8ff)
2021-02-15T23:11:54.0211801+02:00 0HM6HUP28OCPK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@p6='?' (DbType = Int64), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255), @p5='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""UPDATE `LongSessions` SET `Created` = @p0, `ExpiresIn` = @p1, `FingerPrint` = @p2, `Updated` = @p3, `UserId` = @p4, `Value` = @p5
WHERE `Id` = @p6;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T23:11:54.1012067+02:00 0HM6HUP28OCPK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:11:54.1026217+02:00 0HM6HUP28OCPK:00000002 [INF] Executing JsonResult, writing value of type '"Shared.AuthResult"'. (2f513669)
2021-02-15T23:11:54.1032821+02:00 0HM6HUP28OCPK:00000002 [INF] Executed action "Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)" in 116.9589ms (afa2e885)
2021-02-15T23:11:54.1033584+02:00 0HM6HUP28OCPK:00000002 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.LongSessionUpdateAsync (Api.Core)"' (99874f2b)
2021-02-15T23:11:54.1037017+02:00 0HM6HUP28OCPK:00000002 [INF] Request finished in 120.8199ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:11:54.6218575+02:00 0HM6HUP28OCPK:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/376FiSVIicFCW7KQ8FXEPWji32U4yhp-oSw-VQ1_Y6SKz65CrV25pcoUxHjFkM-K   (ca22a1cb)
2021-02-15T23:11:54.6274637+02:00 0HM6HUP28OCPK:00000003 [INF] Successfully validated the token. (60169667)
2021-02-15T23:11:54.6280284+02:00 0HM6HUP28OCPK:00000003 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:11:54.6282328+02:00 0HM6HUP28OCPK:00000003 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:11:54.6286130+02:00 0HM6HUP28OCPK:00000003 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:11:54.6341245+02:00 0HM6HUP28OCPK:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:54.6435388+02:00 0HM6HUP28OCPK:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:54.6533395+02:00 0HM6HUP28OCPK:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:54.6616386+02:00 0HM6HUP28OCPK:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:54.6673923+02:00 0HM6HUP28OCPK:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:54.6814764+02:00 0HM6HUP28OCPK:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:11:54.6849606+02:00 0HM6HUP28OCPK:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:54.6962113+02:00 0HM6HUP28OCPK:00000003 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200 (e28ccfae)
2021-02-15T23:11:54.6964413+02:00 0HM6HUP28OCPK:00000003 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 67.7228ms (afa2e885)
2021-02-15T23:11:54.6965192+02:00 0HM6HUP28OCPK:00000003 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:11:54.6971393+02:00 0HM6HUP28OCPK:00000003 [INF] Request finished in 75.5632ms 200  (791a596a)
2021-02-15T23:11:54.7530647+02:00 0HM6HUP28OCPK:00000004 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:11:54.7544409+02:00 0HM6HUP28OCPK:00000004 [INF] Successfully validated the token. (60169667)
2021-02-15T23:11:54.7547619+02:00 0HM6HUP28OCPK:00000004 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:11:54.7548229+02:00 0HM6HUP28OCPK:00000004 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:11:54.7550457+02:00 0HM6HUP28OCPK:00000004 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:11:54.7559300+02:00 0HM6HUP28OCPK:00000004 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:54.7630331+02:00 0HM6HUP28OCPK:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:54.7638654+02:00 0HM6HUP28OCPK:00000004 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:11:54.7643414+02:00 0HM6HUP28OCPK:00000004 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 9.2528ms (afa2e885)
2021-02-15T23:11:54.7643893+02:00 0HM6HUP28OCPK:00000004 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:11:54.7645470+02:00 0HM6HUP28OCPK:00000004 [INF] Request finished in 11.5735ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:11:54.9206108+02:00 0HM6HUP28OCPL:00000001 [INF] Request starting HTTP/1.1 POST https://localhost:5001/messanger/negotiate?negotiateVersion=1  0 (ca22a1cb)
2021-02-15T23:11:54.9211794+02:00 0HM6HUP28OCPL:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:11:54.9212759+02:00 0HM6HUP28OCPL:00000001 [INF] Executing endpoint '"/messanger/negotiate"' (500cc934)
2021-02-15T23:11:54.9340735+02:00 0HM6HUP28OCPL:00000001 [INF] Executed endpoint '"/messanger/negotiate"' (99874f2b)
2021-02-15T23:11:54.9341463+02:00 0HM6HUP28OCPL:00000001 [INF] Request finished in 13.555ms 200 application/json (791a596a)
2021-02-15T23:11:54.9845261+02:00 0HM6HUP28OCPM:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/messanger?id=vuDPbnQRwaHikGpDk2F06A   (ca22a1cb)
2021-02-15T23:11:54.9849646+02:00 0HM6HUP28OCPM:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:11:54.9850592+02:00 0HM6HUP28OCPM:00000001 [INF] Executing endpoint '"/messanger"' (500cc934)
2021-02-15T23:11:55.0691783+02:00 0HM6HUP28OCPM:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:55.0753464+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:55.0811463+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255), @__sessionCacheKey_SessionId_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`UserId` = @__userId_0) AND (`s`.`SessionId` = @__sessionCacheKey_SessionId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:11:55.0882575+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:11:55.1004042+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Connections` (`ConnectionId`, `Created`, `SessionId`, `Updated`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Connections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:11:55.1112662+02:00 0HM6HUP28OCPM:00000001 [INF] zucAEezPhFvnkpePyF-hdg was connected (8a62ee75)
2021-02-15T23:11:55.1117498+02:00 0HM6HUP28OCPM:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:55.1178802+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:55.1238889+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T23:11:55.1312870+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:11:57.8961006+02:00 0HM6HUP28OCPM:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:11:57.9002022+02:00 0HM6HUP28OCPM:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:11:57.9325687+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:57.9376900+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:57.9498765+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:57.9614523+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:11:58.0020708+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T23:11:58.0118946+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:58.0342537+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:11:58.0809558+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T23:11:58.0959626+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:58.1013298+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:58.1056603+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:11:58.1129033+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T23:11:58.1265381+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:12:28.3864031+02:00 0HM6HUP28OCPM:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:12:28.3876647+02:00 0HM6HUP28OCPM:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:12:28.3964523+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:28.4012315+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:28.4063047+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:28.4125037+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:12:28.4275003+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("9"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T23:12:28.4324276+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:28.4424100+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:12:28.5395737+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T23:12:28.5555248+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:28.5606010+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:28.5651853+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:28.5694374+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T23:12:28.5797016+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:12:36.4204834+02:00 0HM6HUP28OCPM:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:12:36.4224230+02:00 0HM6HUP28OCPM:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:12:36.4301401+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:36.4348159+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:36.4396603+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:36.4445196+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:12:36.4499204+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T23:12:36.4544503+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:36.4615668+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:12:36.5234305+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T23:12:36.5367879+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:36.5413018+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:36.5461453+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("0"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:36.5516703+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T23:12:36.5614980+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:12:37.0794338+02:00 0HM6HUP28OCPM:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:12:37.0821728+02:00 0HM6HUP28OCPM:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:12:37.0919478+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.1034690+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.1093116+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.1187571+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:12:37.1291604+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.1351397+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.1515800+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:12:37.1815495+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T23:12:37.2012314+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.3162144+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.3232965+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.3297315+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T23:12:37.4102964+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("67"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:12:37.6105065+02:00 0HM6HUP28OCPM:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:12:37.6115590+02:00 0HM6HUP28OCPM:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:12:37.6180975+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.6241618+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.6288853+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.6341914+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:12:37.6402663+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.6449375+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.6549594+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:12:37.6789024+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T23:12:37.6945803+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.6983069+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.7033091+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:12:37.7094747+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T23:12:37.7178590+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:13:21.1800951+02:00 0HM6HUP28OCPJ:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:13:21.1812647+02:00 0HM6HUP28OCPJ:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:13:21.1889262+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:21.1945724+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:21.1984339+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:21.2023286+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:13:21.2075918+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T23:13:21.2155986+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:21.2240780+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:13:21.3116550+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T23:13:21.3243167+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:21.3303739+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:21.3366416+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:21.3470198+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T23:13:21.3541326+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:13:30.8305315+02:00 0HM6HUP28OCPJ:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:13:30.8320236+02:00 0HM6HUP28OCPJ:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:13:30.8458299+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:30.8581958+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:30.8638255+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:30.8692297+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:13:30.8763622+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T23:13:30.8826933+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:30.8932694+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:13:30.9113852+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T23:13:30.9211432+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:30.9249926+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:30.9291833+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:30.9333407+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T23:13:30.9408758+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:13:31.7411631+02:00 0HM6HUP28OCPJ:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:13:31.7421901+02:00 0HM6HUP28OCPJ:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:13:31.7494594+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:31.7558502+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:31.7607856+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:31.7662777+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:13:31.7779085+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T23:13:31.7843235+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:31.7972737+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:13:31.8294506+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T23:13:31.8481458+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:31.8553128+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:31.8595271+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:31.8640846+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T23:13:31.8821907+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:13:45.8560578+02:00 0HM6HUP28OCPM:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:13:45.8658188+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:45.8770915+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__connectionId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`ConnectionId` = @__connectionId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:45.8934466+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM `Connections`
WHERE `Id` = @p0;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T23:13:45.9439873+02:00 0HM6HUP28OCPM:00000001 [INF] zucAEezPhFvnkpePyF-hdg was disconected (c7b1ba4f)
2021-02-15T23:13:45.9446687+02:00 0HM6HUP28OCPM:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:13:45.9573267+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("6"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:45.9634845+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T23:13:45.9748705+02:00 0HM6HUP28OCPM:00000001 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:13:45.9982355+02:00 0HM6HUP28OCPM:00000001 [INF] Executed endpoint '"/messanger"' (99874f2b)
2021-02-15T23:13:45.9984889+02:00 0HM6HUP28OCPM:00000001 [INF] Request finished in 111013.9297ms 101  (791a596a)
2021-02-15T23:13:51.9940624+02:00 0HM6HUP28OCPJ:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:13:52.0046068+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:52.0303604+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__connectionId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`ConnectionId` = @__connectionId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:52.0449557+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM `Connections`
WHERE `Id` = @p0;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T23:13:52.0844038+02:00 0HM6HUP28OCPJ:00000001 [INF] iT4Hl_LFsSEwMB0_WnPUhA was disconected (0b5ad322)
2021-02-15T23:13:52.0851456+02:00 0HM6HUP28OCPJ:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:13:52.1067054+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:13:52.1123173+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T23:13:52.1161048+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:13:52.1245558+02:00 0HM6HUP28OCPJ:00000001 [INF] Executed endpoint '"/messanger"' (99874f2b)
2021-02-15T23:13:52.1247937+02:00 0HM6HUP28OCPJ:00000001 [INF] Request finished in 138285.1281ms 101  (791a596a)
2021-02-15T23:14:56.6275175+02:00 0HM6HUP28OCPN:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:14:56.6294375+02:00 0HM6HUP28OCPN:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:14:56.6298674+02:00 0HM6HUP28OCPN:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:14:56.6299742+02:00 0HM6HUP28OCPN:00000001 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:14:56.6302515+02:00 0HM6HUP28OCPN:00000001 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:14:56.6315702+02:00 0HM6HUP28OCPN:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:14:56.6367625+02:00 0HM6HUP28OCPN:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:14:56.6396395+02:00 0HM6HUP28OCPN:00000001 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:14:56.6402661+02:00 0HM6HUP28OCPN:00000001 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 9.9407ms (afa2e885)
2021-02-15T23:14:56.6403270+02:00 0HM6HUP28OCPN:00000001 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:14:56.6405810+02:00 0HM6HUP28OCPN:00000001 [INF] Request finished in 13.1218ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:14:56.8823833+02:00 0HM6HUP28OCPN:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/1mDGzmwnjfyC9jT53LdSU8hDyelema90pbzvaQYiB-x8Mpx1mxzQdKqmGhEsFsM_   (ca22a1cb)
2021-02-15T23:14:56.8850335+02:00 0HM6HUP28OCPN:00000002 [INF] Successfully validated the token. (60169667)
2021-02-15T23:14:56.8854289+02:00 0HM6HUP28OCPN:00000002 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:14:56.8855202+02:00 0HM6HUP28OCPN:00000002 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:14:56.8857472+02:00 0HM6HUP28OCPN:00000002 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:14:56.8864067+02:00 0HM6HUP28OCPN:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:14:56.8933001+02:00 0HM6HUP28OCPN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:14:56.9035763+02:00 0HM6HUP28OCPN:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:14:56.9079267+02:00 0HM6HUP28OCPN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:14:56.9129450+02:00 0HM6HUP28OCPN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:14:56.9177022+02:00 0HM6HUP28OCPN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:14:56.9254060+02:00 0HM6HUP28OCPN:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:14:56.9436539+02:00 0HM6HUP28OCPN:00000002 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200 (e28ccfae)
2021-02-15T23:14:56.9437881+02:00 0HM6HUP28OCPN:00000002 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 57.9798ms (afa2e885)
2021-02-15T23:14:56.9438565+02:00 0HM6HUP28OCPN:00000002 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:14:56.9441989+02:00 0HM6HUP28OCPN:00000002 [INF] Request finished in 61.8576ms 200  (791a596a)
2021-02-15T23:14:57.0046022+02:00 0HM6HUP28OCPN:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:14:57.0062335+02:00 0HM6HUP28OCPN:00000003 [INF] Successfully validated the token. (60169667)
2021-02-15T23:14:57.0065207+02:00 0HM6HUP28OCPN:00000003 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:14:57.0066109+02:00 0HM6HUP28OCPN:00000003 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:14:57.0068142+02:00 0HM6HUP28OCPN:00000003 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:14:57.0074265+02:00 0HM6HUP28OCPN:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:14:57.0121474+02:00 0HM6HUP28OCPN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:14:57.0137406+02:00 0HM6HUP28OCPN:00000003 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:14:57.0143100+02:00 0HM6HUP28OCPN:00000003 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 7.422ms (afa2e885)
2021-02-15T23:14:57.0143922+02:00 0HM6HUP28OCPN:00000003 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:14:57.0146491+02:00 0HM6HUP28OCPN:00000003 [INF] Request finished in 10.1366ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:14:57.1642112+02:00 0HM6HUP28OCPO:00000001 [INF] Request starting HTTP/1.1 POST https://localhost:5001/messanger/negotiate?negotiateVersion=1  0 (ca22a1cb)
2021-02-15T23:14:57.1659554+02:00 0HM6HUP28OCPO:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:14:57.1663662+02:00 0HM6HUP28OCPO:00000001 [INF] Executing endpoint '"/messanger/negotiate"' (500cc934)
2021-02-15T23:14:57.1758953+02:00 0HM6HUP28OCPO:00000001 [INF] Executed endpoint '"/messanger/negotiate"' (99874f2b)
2021-02-15T23:14:57.1760323+02:00 0HM6HUP28OCPO:00000001 [INF] Request finished in 11.8604ms 200 application/json (791a596a)
2021-02-15T23:14:57.2551827+02:00 0HM6HUP28OCPP:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/messanger?id=-pZ6EqPe3WA0HLFX7RnYBA   (ca22a1cb)
2021-02-15T23:14:57.2565158+02:00 0HM6HUP28OCPP:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:14:57.2566906+02:00 0HM6HUP28OCPP:00000001 [INF] Executing endpoint '"/messanger"' (500cc934)
2021-02-15T23:14:57.3802673+02:00 0HM6HUP28OCPP:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:14:57.5035323+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:14:57.5183531+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:14:57.5446479+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Connections` (`ConnectionId`, `Created`, `SessionId`, `Updated`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Connections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:14:57.6298681+02:00 0HM6HUP28OCPP:00000001 [INF] _QAN0G6sFMlx8l_qG5_pgw was connected (da80b9fa)
2021-02-15T23:14:57.6306358+02:00 0HM6HUP28OCPP:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:14:57.6814892+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("9"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:14:57.6991404+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T23:14:57.7110213+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:15:04.3529917+02:00 0HM6HUP28OCPQ:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:15:04.3543001+02:00 0HM6HUP28OCPQ:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:15:04.3545467+02:00 0HM6HUP28OCPQ:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:15:04.3546184+02:00 0HM6HUP28OCPQ:00000001 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:15:04.3550054+02:00 0HM6HUP28OCPQ:00000001 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:15:04.3557163+02:00 0HM6HUP28OCPQ:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:15:04.3657826+02:00 0HM6HUP28OCPQ:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:04.3665396+02:00 0HM6HUP28OCPQ:00000001 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:15:04.3670980+02:00 0HM6HUP28OCPQ:00000001 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 12.0328ms (afa2e885)
2021-02-15T23:15:04.3671696+02:00 0HM6HUP28OCPQ:00000001 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:15:04.3674705+02:00 0HM6HUP28OCPQ:00000001 [INF] Request finished in 14.4845ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:15:04.6655529+02:00 0HM6HUP28OCPQ:00000002 [INF] Request starting HTTP/1.1 GET https://localhost:5001/MessangerSession/setsession/rT2_hetffWblA0lI-8ForEV3ubnOpJN-JkkdFWo2t-o9O-iwYoQrR2dGOCZ1o3_d   (ca22a1cb)
2021-02-15T23:15:04.6700821+02:00 0HM6HUP28OCPQ:00000002 [INF] Successfully validated the token. (60169667)
2021-02-15T23:15:04.6703967+02:00 0HM6HUP28OCPQ:00000002 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:15:04.6704882+02:00 0HM6HUP28OCPQ:00000002 [INF] Executing endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (500cc934)
2021-02-15T23:15:04.6707354+02:00 0HM6HUP28OCPQ:00000002 [INF] Route matched with "{action = \"CacheSession\", controller = \"MessangerSession\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CacheSessionAsync(System.String)" on controller "Api.Core.Controllers.Messanger.MessangerSessionController" ("Api.Core"). (122b2fdf)
2021-02-15T23:15:04.6716265+02:00 0HM6HUP28OCPQ:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:15:04.6779716+02:00 0HM6HUP28OCPQ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:04.6837670+02:00 0HM6HUP28OCPQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:04.6920305+02:00 0HM6HUP28OCPQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:04.6968061+02:00 0HM6HUP28OCPQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:04.7020182+02:00 0HM6HUP28OCPQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__decryptedSessionId_0='?' (Size = 4000), @__userId_1='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE (`s`.`SessionId` = @__decryptedSessionId_0) AND (`s`.`UserId` = @__userId_1)
LIMIT 1" (0723d8ff)
2021-02-15T23:15:04.7042893+02:00 0HM6HUP28OCPQ:00000002 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:15:04.7131862+02:00 0HM6HUP28OCPQ:00000002 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200 (e28ccfae)
2021-02-15T23:15:04.7133148+02:00 0HM6HUP28OCPQ:00000002 [INF] Executed action "Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)" in 42.5294ms (afa2e885)
2021-02-15T23:15:04.7133752+02:00 0HM6HUP28OCPQ:00000002 [INF] Executed endpoint '"Api.Core.Controllers.Messanger.MessangerSessionController.CacheSessionAsync (Api.Core)"' (99874f2b)
2021-02-15T23:15:04.7136863+02:00 0HM6HUP28OCPQ:00000002 [INF] Request finished in 48.1887ms 200  (791a596a)
2021-02-15T23:15:04.7729637+02:00 0HM6HUP28OCPQ:00000003 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/getauthuserinfo   (ca22a1cb)
2021-02-15T23:15:04.7742304+02:00 0HM6HUP28OCPQ:00000003 [INF] Successfully validated the token. (60169667)
2021-02-15T23:15:04.7745880+02:00 0HM6HUP28OCPQ:00000003 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:15:04.7746609+02:00 0HM6HUP28OCPQ:00000003 [INF] Executing endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (500cc934)
2021-02-15T23:15:04.7748461+02:00 0HM6HUP28OCPQ:00000003 [INF] Route matched with "{action = \"GetAuthUserInfo\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthUserInfo()" on controller "Api.Core.Controllers.AccountController" ("Api.Core"). (122b2fdf)
2021-02-15T23:15:04.7754715+02:00 0HM6HUP28OCPQ:00000003 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:15:04.7807387+02:00 0HM6HUP28OCPQ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__UserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__UserName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:04.7814955+02:00 0HM6HUP28OCPQ:00000003 [INF] Executing JsonResult, writing value of type '"<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'. (2f513669)
2021-02-15T23:15:04.7819580+02:00 0HM6HUP28OCPQ:00000003 [INF] Executed action "Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)" in 7.0626ms (afa2e885)
2021-02-15T23:15:04.7820216+02:00 0HM6HUP28OCPQ:00000003 [INF] Executed endpoint '"Api.Core.Controllers.AccountController.GetAuthUserInfo (Api.Core)"' (99874f2b)
2021-02-15T23:15:04.7822928+02:00 0HM6HUP28OCPQ:00000003 [INF] Request finished in 9.4248ms 200 application/json; charset=utf-8 (791a596a)
2021-02-15T23:15:04.9540317+02:00 0HM6HUP28OCPR:00000001 [INF] Request starting HTTP/1.1 POST https://localhost:5001/messanger/negotiate?negotiateVersion=1  0 (ca22a1cb)
2021-02-15T23:15:04.9550261+02:00 0HM6HUP28OCPR:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:15:04.9551858+02:00 0HM6HUP28OCPR:00000001 [INF] Executing endpoint '"/messanger/negotiate"' (500cc934)
2021-02-15T23:15:04.9627727+02:00 0HM6HUP28OCPR:00000001 [INF] Executed endpoint '"/messanger/negotiate"' (99874f2b)
2021-02-15T23:15:04.9641569+02:00 0HM6HUP28OCPR:00000001 [INF] Request finished in 8.9577ms 200 application/json (791a596a)
2021-02-15T23:15:05.0248155+02:00 0HM6HUP28OCPS:00000001 [INF] Request starting HTTP/1.1 GET https://localhost:5001/messanger?id=rpxqVw0r_6h412jiPlkKDw   (ca22a1cb)
2021-02-15T23:15:05.0258443+02:00 0HM6HUP28OCPS:00000001 [INF] Successfully validated the token. (60169667)
2021-02-15T23:15:05.0260238+02:00 0HM6HUP28OCPS:00000001 [INF] Executing endpoint '"/messanger"' (500cc934)
2021-02-15T23:15:05.1078520+02:00 0HM6HUP28OCPS:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:15:05.1117333+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:05.1183333+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:15:05.1267461+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Connections` (`ConnectionId`, `Created`, `SessionId`, `Updated`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Connections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:15:05.1772634+02:00 0HM6HUP28OCPS:00000001 [INF] ZE2Yd2KT4eZy6xclzeiR9g was connected (0aeb1659)
2021-02-15T23:15:05.1781764+02:00 0HM6HUP28OCPS:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:15:05.1829754+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:05.1885782+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T23:15:05.1936976+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:15:21.8950805+02:00 0HM6HUP28OCPS:00000001 [INF] Authorization was successful. (0d575a54)
2021-02-15T23:15:21.8956548+02:00 0HM6HUP28OCPS:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:15:21.9015074+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:21.9076078+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:21.9093564+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:21.9135105+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:15:21.9193857+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__user1Id_0='?' (Size = 4000), @__user2Id_1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE ((`d`.`User1Id` = @__user1Id_0) AND (`d`.`User2Id` = @__user2Id_1)) OR ((`d`.`User1Id` = @__user2Id_1) AND (`d`.`User2Id` = @__user1Id_0))
LIMIT 1" (0723d8ff)
2021-02-15T23:15:21.9360970+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("8"ms) [Parameters=["@__item_Id_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__item_Id_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:21.9445435+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Cyphers` (`Created`, `Secret`, `Updated`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Cyphers`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();" (0723d8ff)
2021-02-15T23:15:22.0277573+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (Size = 255), @p9='?' (DbType = DateTime)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Messages` (`Id`, `Created`, `CypherId`, `DialogId`, `IsReaded`, `MessageId`, `MessageText`, `ReceiverId`, `SenderId`, `Updated`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);" (0723d8ff)
2021-02-15T23:15:22.0402765+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`Created`, `s`.`CypherId`, `s`.`Updated`, `s`.`UserId`
FROM `StrongKeys` AS `s`
WHERE `s`.`UserId` = @__userId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:22.0456040+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__strongKey_CypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__strongKey_CypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:22.0501277+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__cypherId_0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`Created`, `c`.`Secret`, `c`.`Updated`
FROM `Cyphers` AS `c`
WHERE `c`.`Id` = @__cypherId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:15:22.0544855+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_ReceiverId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`Id`, `s`.`ClientPublicKey`, `s`.`Created`, `s`.`ServerPrivateKey`, `s`.`ServerPublicKey`, `s`.`SessionId`, `s`.`Updated`, `s`.`UserId`
FROM `Sessions` AS `s`
WHERE `s`.`UserId` = @__message_ReceiverId_0" (0723d8ff)
2021-02-15T23:15:22.0621848+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:16:19.1272431+02:00 0HM6HUP28OCPS:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:16:19.1370225+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:16:19.1439049+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("0"ms) [Parameters=["@__connectionId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`ConnectionId` = @__connectionId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:16:19.1572935+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM `Connections`
WHERE `Id` = @p0;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T23:16:19.2024865+02:00 0HM6HUP28OCPS:00000001 [INF] ZE2Yd2KT4eZy6xclzeiR9g was disconected (86a20457)
2021-02-15T23:16:19.2028828+02:00 0HM6HUP28OCPS:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:16:19.2170168+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("5"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:16:19.2264398+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T23:16:19.2285514+02:00 0HM6HUP28OCPS:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:16:19.2385591+02:00 0HM6HUP28OCPS:00000001 [INF] Executed endpoint '"/messanger"' (99874f2b)
2021-02-15T23:16:19.2388655+02:00 0HM6HUP28OCPS:00000001 [INF] Request finished in 74214.05ms 101  (791a596a)
2021-02-15T23:16:24.7262671+02:00 0HM6HUP28OCPP:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:16:24.7387518+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__userName_0
LIMIT 1" (0723d8ff)
2021-02-15T23:16:24.7478931+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@__connectionId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `c`.`Id`, `c`.`ConnectionId`, `c`.`Created`, `c`.`SessionId`, `c`.`Updated`, `c`.`UserId`
FROM `Connections` AS `c`
WHERE `c`.`ConnectionId` = @__connectionId_0
LIMIT 1" (0723d8ff)
2021-02-15T23:16:24.7628462+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int64)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM `Connections`
WHERE `Id` = @p0;
SELECT ROW_COUNT();" (0723d8ff)
2021-02-15T23:16:24.7925250+02:00 0HM6HUP28OCPP:00000001 [INF] _QAN0G6sFMlx8l_qG5_pgw was disconected (3c93a2e3)
2021-02-15T23:16:24.7930458+02:00 0HM6HUP28OCPP:00000001 [INF] Entity Framework Core "3.1.9" initialized '"ApplicationContext"' using provider '"Pomelo.EntityFrameworkCore.MySql"' with options: "None" (9958f5bb)
2021-02-15T23:16:24.7967600+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__Context_User_Identity_Name_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Created`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`ProfileId`, `a`.`SecurityStamp`, `a`.`StrongKeyId`, `a`.`TwoFactorEnabled`, `a`.`Updated`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`UserName` = @__Context_User_Identity_Name_0
LIMIT 1" (0723d8ff)
2021-02-15T23:16:24.8015975+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT `d`.`Id`, `d`.`Created`, `d`.`Updated`, `d`.`User1Id`, `d`.`User2Id`
FROM `Dialogs` AS `d`
WHERE (`d`.`User1Id` = @__userId_0) OR (`d`.`User2Id` = @__userId_0)" (0723d8ff)
2021-02-15T23:16:24.8061302+02:00 0HM6HUP28OCPP:00000001 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 255)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM `Connections` AS `c`
WHERE `c`.`UserId` = @__userId_0" (0723d8ff)
2021-02-15T23:16:24.8138699+02:00 0HM6HUP28OCPP:00000001 [INF] Executed endpoint '"/messanger"' (99874f2b)
2021-02-15T23:16:24.8145982+02:00 0HM6HUP28OCPP:00000001 [INF] Request finished in 87559.4164ms 101  (791a596a)
2021-02-15T23:16:25.7025329+02:00  [INF] Application is shutting down... (90f52c38)
